<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xml:lang="ja-JP" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Hail2u.net</title>
    <link>http://hail2u.net/</link>
    <description>Hail2u.net is simply a notebook of Kyo Nagashima mainly about web design, programming &amp; their related technologies.</description>
    <language>ja-JP</language>
    <copyright>Copyright © 2002-2014, Kyo Nagashima</copyright>
    <managingEditor>hail2u@gmail.com (Kyo Nagashima)</managingEditor>
    <webMaster>hail2u@gmail.com (Kyo Nagashima)</webMaster>
    <atom:link rel="self" href="http://hail2u.net/feed"/>
    <atom:link rel="hub" href="https://pubsubhubbub.appspot.com/"/>
    <creativeCommons:license>http://creativecommons.org/licenses/by-nc/3.0/</creativeCommons:license>
    <item>
      <title>HTML5における空の値の属性</title>
      <link>http://hail2u.net/blog/webdesign/html5-empty-value-attribute.html</link>
      <description>属性に空の値を指定する時は、例えばalt=""などと書く。実は仕様のHTML文法にはもうひとつ書き方が用意されており、それはaltとのみ書くという形のものだ。確かにこう書けるし、真偽値を取る属性で属性のみ書く方法もこの文法規定がベースになっている。少し前に読んだalt属性の書き方ガイドといったような記事ではそのように触れられている。しかし僕は属性のみを書くのは真偽値を取る属性のみに限定した方が良いように考えている。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/html5-empty-value-attribute.html</guid>
      <pubDate>Tue, 30 Dec 2014 03:42:00 +0900</pubDate>
      <content:encoded>&lt;p&gt;属性に空の値を指定する時は、例えば&lt;code&gt;alt=&amp;quot;&amp;quot;&lt;/code&gt;などと書く。実は&lt;a href="http://www.w3.org/TR/html5/syntax.html#attributes-0"&gt;仕様のHTML文法&lt;/a&gt;にはもうひとつ書き方が用意されており、それは&lt;code&gt;alt&lt;/code&gt;とのみ書くという形のものだ。確かにこう書けるし、&lt;a href="http://www.w3.org/TR/html5/infrastructure.html#boolean-attributes"&gt;真偽値を取る属性&lt;/a&gt;で属性のみ書く方法もこの文法規定がベースになっている。少し前に読んだ&lt;a href="http://demosthenes.info/blog/969/The-Art-of-alt-Writing-Great-Descriptive-Text-For-Images"&gt;&lt;code&gt;alt&lt;/code&gt;属性の書き方ガイドといったような記事&lt;/a&gt;ではそのように触れられている。しかし僕は属性のみを書くのは真偽値を取る属性のみに限定した方が良いように考えている。&lt;/p&gt;

&lt;p&gt;なぜなら空の値を指定する時に属性のみ書けば良いという文法を知る人が多分ほとんどいないだろうからだ。裏を返すと&lt;code&gt;checked=&amp;quot;checked&amp;quot;&lt;/code&gt;を&lt;code&gt;checked&lt;/code&gt;と略せるという誤解した知識で憶えた人が多いということで、実際僕もそうだった。確かに誤解なのだけど、もう広まりきってしまった誤解なので、それはそういうものとして触れない方が良いんじゃないかと思う。&lt;/p&gt;

&lt;p&gt;そうでないと&lt;code&gt;alt&lt;/code&gt;とのみ書けば良いという半端な知識から、まさかの&lt;code&gt;alt=&amp;quot;alt&amp;quot;&lt;/code&gt;といった間違いに着地したりしてしまいそうだ。属性値のみを書くパターンは真偽値を取る属性のみに限り、それ以外では明示的に&lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt;を指定してやるのがわかりやすい。仕様の誤解が修正されないという難点はあるけれども。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>Drawic v2.8.0</title>
      <link>http://hail2u.net/blog/webdesign/drawic-v2.8.0.html</link>
      <description>DrawicにFlickrやGoogle+、YouTube、PayPalのアイコンを追加してv2.8.0をリリースした。必要だったのはFlickrとGoogle+でそれ以外は数合わせ。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/drawic-v2.8.0.html</guid>
      <pubDate>Mon, 29 Dec 2014 05:55:00 +0900</pubDate>
      <content:encoded>&lt;figure&gt;
  &lt;a href="http://hail2u.github.io/drawic/"&gt;&lt;img alt="Flickr Google+ PayPal YouTube" src="http://hail2u.net/images/blog/drawic-v2.8.0.png"&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;a href="http://hail2u.github.io/drawic/"&gt;Drawic&lt;/a&gt;にFlickrやGoogle+、YouTube、PayPalのアイコンを追加してv2.8.0をリリースした。必要だったのはFlickrとGoogle+でそれ以外は数合わせ。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;iPhoneで雑に撮った写真をDropboxに保存してたけれど、別に同期しなくてもいいようなものだなと思ったので、Instagramにでもしようかなと思ってた。でもInstagramでユーザー名が取れなかったので、Flickrを引っ張りだすことにした。Flickrアプリはインストールするためにストア切り替えたりとかするのが面倒だったけど、その後は快適に使えそうな感じがする。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>“マークアップ”</title>
      <link>http://hail2u.net/blog/webdesign/mark-things-up.html</link>
      <description>クリスマスにTwitterで@glatyouと少しマークアップについてやりとりをした。そこではTwitterなのでだいぶ端折ったものの、だいたい伝わったとは思う。あわせて今年はHTML5勧告のタイミングだ。このようなマークアップについての考え方を述べるにはもってこいだろう。そこで僕の考えを文書としてまとめ、“マークアップ”するということ ～ HTML5勧告に寄せて ～というタイトルで公開した。この文書を持って今年のまとめとしたい。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/mark-things-up.html</guid>
      <pubDate>Sun, 28 Dec 2014 04:57:00 +0900</pubDate>
      <content:encoded>&lt;p&gt;クリスマスにTwitterで&lt;a href="https://twitter.com/glatyou"&gt;@glatyou&lt;/a&gt;と少しマークアップについてやりとりをした。そこではTwitterなのでだいぶ端折ったものの、だいたい伝わったとは思う。あわせて今年はHTML5勧告のタイミングだ。このようなマークアップについての考え方を述べるにはもってこいだろう。そこで僕の考えを文書としてまとめ、&lt;a href="http://hail2u.net/documents/markup.html"&gt;“マークアップ”するということ ～ HTML5勧告に寄せて ～&lt;/a&gt;というタイトルで公開した。この文書を持って今年のまとめとしたい。&lt;/p&gt;

&lt;p&gt;当該文書では、著作権表示という日本ではおよそ実践的でないものを例としたので、多少哲学的な側面が強い。他に良い例がうまく思いつかなかったのもあるし、元々のTwitterでのやりとりがそれだったのもある。他に例を考えるとするとトップニモドルのマークアップでも良かったかもしれない。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;footer&amp;gt;
  &amp;lt;nav&amp;gt;
    &amp;lt;ul&amp;gt;
      &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;#logo&amp;quot;&amp;gt;Back to Top&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
    &amp;lt;/ul&amp;gt;
  &amp;lt;/nav&amp;gt;
&amp;lt;/footer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;このような間違いと冗長さが多分に含まれるが、ちょくちょく見かけるようなコードを起点にできる。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;footer&amp;gt;&amp;lt;a href=&amp;quot;#top&amp;quot;&amp;gt;Back to Top&amp;lt;/a&amp;gt;&amp;lt;/footer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;そしてこう磨き上げるまでを書くのも悪くなかったかもしれない。思考の過程としてはほとんど同じなので、どうしてこうなるのかを考えてみるのも良いだろう。&lt;/p&gt;

&lt;p&gt;本当は最後の項でテキトーに書かれたHTML文書が失ったものについてじっくりと書ければもっと完成度の高い文書になったことと思う。しかしそこまで書くとトピックが二分してしまいそうなことと、またその話かで終わってしまいそうな気がしたので、直接的な言葉すらも避けてぼかしておいた。アとかユとかUとかで始まる単語を想像してくれれば遠くないだろう。&lt;/p&gt;

&lt;p&gt;このようなマークアップするための思考の元、&lt;a href="https://github.com/hail2u/html-best-practices"&gt;HTML Best Practices&lt;/a&gt;も参照するとわかりやすいはずだ。出す順が逆だともっと良かったような気がする。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;ここで予防線をいっぱい張っておきたいところだけれども、それはやめておく。もちろん僕は仕様側の人間ではないので、とか、あくまでも、とか、一般的には、とかいっぱい書きたい。&lt;/p&gt;

&lt;p&gt;あ、&lt;a href="http://www.w3.org/2014/10/html5-rec.html.ja"&gt;HTML5勧告&lt;/a&gt;おめでとうございます。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>Documentsに「“マークアップ”するということ ～ HTML5勧告に寄せて ～」を追加</title>
      <link>http://hail2u.net/documents/markup.html</link>
      <pubDate>Sat, 27 Dec 2014 21:02:53 +0900</pubDate>
      <guid isPermaLink="true">http://hail2u.net/documents/markup.html</guid>
      <description>&lt;p&gt;HTMLを適切な要素を使って書いていくことは実はそれほど難しくはない。しかし過剰に要素を使わずに、かつスタイリングすることも意識して、と適切に“マークアップ”するのはなかなかの修練を必要とする。いったい“マークアップ”するということはどういうことなのだろうか、そしてどのような思考の元に行えば良いのだろうか。&lt;/p&gt;</description>
    </item>
    <item>
      <title>ブラウザー・キャッシュの今</title>
      <link>http://hail2u.net/blog/webdesign/the-browser-cache-today.html</link>
      <description>元々「静的なファイルは限界までキャッシュしろ！」というような金言はそれほど重要視していなかった。The changing role of the browser cacheという記事では、開きっぱなしにされるタブと継続的デプロイをキーワードに、ブラウザー・キャッシュの役割が変化していることを解説している。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/the-browser-cache-today.html</guid>
      <pubDate>Sat, 27 Dec 2014 00:47:00 +0900</pubDate>
      <content:encoded>&lt;p&gt;元々「静的なファイルは限界までキャッシュしろ！」というような金言はそれほど重要視していなかった。&lt;a href="http://calendar.perfplanet.com/2014/the-changing-role-of-the-browser-cache/"&gt;The changing role of the browser cache&lt;/a&gt;という記事では、開きっぱなしにされるタブと継続的デプロイをキーワードに、ブラウザー・キャッシュの役割が変化していることを解説している。&lt;/p&gt;

&lt;p&gt;ブラウザー・キャッシュが再訪問に対して威力を発揮するのに対し、開きっぱなしにされるタブでは再訪問されることはなく、継続的デプロイされるアプリケーションではその効果は限定的なものにしかなりえない、という意見だ。納得の出来る意見ではある。&lt;/p&gt;

&lt;p&gt;僕が元々こういった長期間のキャッシュに疑問を持っていたのも少し似ている。特に継続的デプロイの元では限定的な効果になることは自明だと考えていた。またいわゆる普通のウェブページにおいては再訪問という行為そのものが随分前から死滅したとも考えている。具体的にはソーシャル・ブックマークの普及後、一時的な消費に偏るようになってからそうなったと思っている。&lt;/p&gt;

&lt;p&gt;一方で長期化のデメリットは迅速にキャッシュの更新が行き渡らないという点で明白だ。もちろんキャッシュをリフレッシュする、というか別に配信するテクニックがあり、それを採用するわけだけど、なんというか美しくない。デプロイされる間隔に対して適切なキャッシュ期限を試行錯誤する方が真っ当なんじゃないかという思いが強い。&lt;/p&gt;

&lt;p&gt;ウェブのコンポーネント化が進むであろう今後は更に迅速なキャッシュの更新が求められるわけで、ブラウザー・キャッシュの長期化は忌避されていくようになるのかもしれない。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;今年から読み始めた&lt;a href="http://calendar.perfplanet.com/"&gt;Performance Calendar&lt;/a&gt;は過去ログもそれなりに面白そうなので、年末年始に読んでみようと思う。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>スクロールバーの幅</title>
      <link>http://hail2u.net/blog/webdesign/scrollbar-width.html</link>
      <description>スクロールバーの幅を知りたいことはままある。CSSで拾えれば最高なのだけど……というところで、calc(100vw - 100%)で拾えることがわかった。ただこれで拾えるかどうかはその要素の親に依存するので、いつでもどこでも使えるわけではない。せめてJavaScriptでは扱えるようにしてみたい。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/scrollbar-width.html</guid>
      <pubDate>Fri, 26 Dec 2014 04:24:00 +0900</pubDate>
      <content:encoded>&lt;p&gt;スクロールバーの幅を知りたいことはままある。CSSで拾えれば最高なのだけど……というところで、&lt;code&gt;calc(100vw - 100%)&lt;/code&gt;で拾えることがわかった。ただこれで拾えるかどうかはその要素の親に依存するので、いつでもどこでも使えるわけではない。せめてJavaScriptでは扱えるようにしてみたい。&lt;/p&gt;

&lt;p&gt;View Demo: &lt;a href="http://hail2u.net/pub/test/604.html"&gt;Get Scrollbar Width with JavaScript&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ボタンをクリックするとスクロールバーの幅がダイアログで表示される。オーバーレイのスクロールバーの場合は&lt;code&gt;0px&lt;/code&gt;になり、そうでない場合はスクロールバーの幅が返る。&lt;code&gt;body&lt;/code&gt;要素の幅が&lt;code&gt;100%&lt;/code&gt;であることが条件になるが、まず大丈夫だろう。&lt;/p&gt;

&lt;p&gt;仕組みは単純なもので&lt;code&gt;width&lt;/code&gt;プロパティーを&lt;code&gt;calc(100vw - 100%)&lt;/code&gt;にした要素を&lt;code&gt;body&lt;/code&gt;要素の子に突っ込んで、計算済みスタイルを拾うというだけだ。&lt;code&gt;overflow&lt;/code&gt;プロパティーを切り替え要素の幅を比べる古くからあるものと比べるとコードはわかりやすく短い。その半面、&lt;code&gt;vw&lt;/code&gt;単位と&lt;code&gt;calc()&lt;/code&gt;関数への対応が必要と敷居は少し高い。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;そのうち全てオーバーレイ・スクロールバーになりそうではあるので、その暁には無駄な知識になる。是非なってほしい。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>kyonagashima.com</title>
      <link>http://hail2u.net/blog/internet/kyonagashima-com.html</link>
      <description>Brad Frostが自分の名前のドメインを確保するのにぼったくられたという記事を読んで、良い機会なのでkyonagashima.comを確保した。面倒だったので735円だしといつも通りValue Domainで取得した。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Internet</category>
      <guid isPermaLink="true">http://hail2u.net/blog/internet/kyonagashima-com.html</guid>
      <pubDate>Thu, 25 Dec 2014 03:32:00 +0900</pubDate>
      <content:encoded>&lt;figure&gt;
  &lt;a href="https://kyonagashima.com/"&gt;&lt;img alt="Kyo Nagashima" src="http://hail2u.net/images/blog/kyonagashima-com.gif"&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;a href="http://bradfrost.com/blog/post/bradfrost-dot-com/"&gt;Brad Frostが自分の名前のドメインを確保するのにぼったくられたという記事&lt;/a&gt;を読んで、良い機会なので&lt;a href="https://kyonagashima.com/"&gt;kyonagashima.com&lt;/a&gt;を確保した。面倒だったので735円だしといつも通り&lt;a href="https://www.value-domain.com/"&gt;Value Domain&lt;/a&gt;で取得した。&lt;/p&gt;

&lt;p&gt;世間のドメイン取得代行業者への評価は地に落ちているような印象だが、僕は実際に辛いトラブルにあったことがなく、大体は根気強いメールのやりとりのみで解決できてきたので、あまり悪く評価してはいない。でも検索クエリーを横取りして先に奪ってしまうといったことはやってそうだなという程度には信用していない。&lt;/p&gt;

&lt;p&gt;実際にそういった状況に遭遇したとしたら、金の問題よりもイライラで沸騰しそうだ。買って後悔することはまずないので、買っておくかという程度の気持ちで確保した。そのはずなのに既に後悔していたりもし、ままならない。とりあえずのところは不要であるのに、ネガティブな理由で動いてしまったからだと思う。&lt;/p&gt;

&lt;p&gt;とにかくそういうイライラが待つ未来からとりあえずは解放された。失効させると輪をかけて辛い未来が待っているわけでもあるけれども。あとはむしゃくしゃして消さないようにも気をつけよう。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;ウェブページは&lt;a href="https://pages.github.com/"&gt;GitHub Pages&lt;/a&gt; + &lt;a href="https://www.cloudflare.com/"&gt;CloudFlare&lt;/a&gt;を利用したサブドメインなしのhttpsでの提供にした。httpsの強制(httpへのアクセスをhttpsへリダイレクトさせる)もCloudFlareのPage Ruleを使うと簡単に実現できる。&lt;/p&gt;

&lt;figure&gt;
  &lt;img alt="Page Ruleのダッシュボードで、ワイルドカードを使ってURLパターンを指定し、Always use httpsを有効にしたPage Ruleのパターンを追加しようとしているところ" src="http://hail2u.net/images/blog/cloudflare-forcing-https-page-rule.png"&gt;

  &lt;figcaption&gt;CloudFlare Page Rule Dashboard&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;内容としてはペライチでソーシャル・ネットワークのプロフィールへのリンク以外には特に何もなく、他に何か使う予定は少ししかない。書き物は今まで通りここに書く。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>URLUtils.hash (location.hash)とその返す値</title>
      <link>http://hail2u.net/blog/webdesign/urlutils-hash-and-its-returning-value.html</link>
      <description>URLUtilsインターフェイスのブラウザーにおける実装であるLocationオブジェクトのhashプロパティーによりURLのフラグメント識別子(と#)を取得・代入できる。最近のブラウザーは非ASCII文字列もURLエンコードせずに扱えるようになっているが、この辺りの挙動がFirefoxだけ少し違うようだ。それはhashプロパティーの返す値で、常にデコードされた形で返ってくるようになっている。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/urlutils-hash-and-its-returning-value.html</guid>
      <pubDate>Wed, 24 Dec 2014 01:05:00 +0900</pubDate>
      <content:encoded>&lt;p&gt;&lt;code&gt;URLUtils&lt;/code&gt;インターフェイスのブラウザーにおける実装である&lt;code&gt;Location&lt;/code&gt;オブジェクトの&lt;code&gt;hash&lt;/code&gt;プロパティーによりURLのフラグメント識別子(と&lt;code&gt;#&lt;/code&gt;)を取得・代入できる。最近のブラウザーは非ASCII文字列もURLエンコードせずに扱えるようになっているが、この辺りの挙動がFirefoxだけ少し違うようだ。それは&lt;code&gt;hash&lt;/code&gt;プロパティーの返す値で、常にデコードされた形で返ってくるようになっている。&lt;/p&gt;

&lt;p&gt;例えば適当なウェブページで開発者ツール(的なもの)を開き、コンソール(などと呼ばれてるもの)で以下を実行してみる。&lt;/p&gt;

&lt;pre&gt;&lt;samp&gt;&amp;gt; &lt;kbd&gt;location.hash = &amp;#39;#&amp;#39; + &amp;#39;あいうえお&amp;#39;&lt;/kbd&gt;
&amp;lt; &amp;quot;#あいうえお&amp;quot;
&amp;gt; &lt;kbd&gt;location.hash&lt;/kbd&gt;
&amp;lt; &amp;quot;#あいうえお&amp;quot;
&amp;gt; &lt;kbd&gt;location.hash = &amp;#39;#&amp;#39; + encodeURIComponent(&amp;#39;あいうえお&amp;#39;)&lt;/kbd&gt;
&amp;lt; &amp;quot;#%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%81%8A&amp;quot;
&amp;gt; &lt;kbd&gt;location.hash&lt;/kbd&gt;
&amp;lt; &amp;quot;#%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%81%8A&amp;quot;
&lt;/samp&gt;&lt;/pre&gt;

&lt;p&gt;Chrome 39やInternet Explorer 11ではこのようになる。&lt;code&gt;location.hash&lt;/code&gt;に代入した文字列はそのまま返ってくるだけだ。対してFirefox 34ではURLエンコードした文字列を代入した場合、デコードされて返ってくる。&lt;/p&gt;

&lt;pre&gt;&lt;samp&gt;&amp;gt; &lt;kbd&gt;location.hash = &amp;#39;#&amp;#39; + &amp;#39;あいうえお&amp;#39;&lt;/kbd&gt;
&amp;lt; &amp;quot;#あいうえお&amp;quot;
&amp;gt; &lt;kbd&gt;location.hash&lt;/kbd&gt;
&amp;lt; &amp;quot;#あいうえお&amp;quot;
&amp;gt; &lt;kbd&gt;location.hash = &amp;#39;#&amp;#39; + encodeURIComponent(&amp;#39;あいうえお&amp;#39;)&lt;/kbd&gt;
&amp;lt; &amp;quot;#%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%81%8A&amp;quot;
&amp;gt; &lt;kbd&gt;location.hash&lt;/kbd&gt;
&amp;lt; &amp;quot;#あいうえお&amp;quot;
&lt;/samp&gt;&lt;/pre&gt;

&lt;p&gt;もちろん開発者ツール上だけでなく通常のスクリプト上でも同じなので、この辺りを扱う場合はそれなりの注意が必要になる。常にURLエンコードされているのかどうかを意識するべきということだ。&lt;/p&gt;

&lt;p&gt;例えば今のGitHubではこの辺りを使って&lt;code&gt;id&lt;/code&gt;属性の重複避けと&lt;code&gt;hashchange&lt;/code&gt;イベントの監視によるページ内ジャンプを実装している。しかし、URLエンコード済み(&lt;code&gt;href&lt;/code&gt;属性の値)とそうでないもの(&lt;code&gt;id&lt;/code&gt;属性の値)が混ざっているため、日本語の見出しではChrome 39やInternet Explorer 11だと比較に失敗してページ内ジャンプがうまく動かない。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;どちらかというとFirefoxの挙動の方が開発者に優しいとは言えるかもしれない。常にデコードされていると想定できるので、二重にエンコードしてしまうことやデコードし忘れということがない。しかしその一方でURLエンコードされた文字列とそうでない文字列が含まれたフラグメント識別子を元に戻すことができないという欠陥もある。&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=483304"&gt;Bug 483304&lt;/a&gt;でかなり昔から議論されているようだ。&lt;/p&gt;

&lt;p&gt;&lt;a href="https://url.spec.whatwg.org/"&gt;URL仕様&lt;/a&gt;では、とにかくフラグメント識別子は&lt;a href="https://url.spec.whatwg.org/#fragment-state"&gt;必要ならURLエンコードされているべき&lt;/a&gt;となっている。そして&lt;a href="https://url.spec.whatwg.org/#dom-urlutils-hash"&gt;&lt;code&gt;URLUtils&lt;/code&gt;インターフェイスの&lt;code&gt;hash&lt;/code&gt;プロパティー&lt;/a&gt;でもゲッターは&lt;code&gt;#&lt;/code&gt;と連結して返せというだけになっているので、勝手にデコードして返すのはバグと言って良さそう。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>:target擬似クラスとHistory API</title>
      <link>http://hail2u.net/blog/webdesign/target-pseudo-class-and-history-api.html</link>
      <description>:target擬似クラスではフラグメント識別子と一致する要素に対してスタイルを当てることができる。これを利用するとCSSだけでインタラクティブにデザインを変更することが可能になる。一方History APIではページの遷移なくフラグメント識別子を含め、アクセス中のURLを書き換えることができる。では:target擬似クラスで有効になっているスタイルは、History APIでフラグメント識別子を変更した場合に動的に切り替わってくれるだろうか。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/target-pseudo-class-and-history-api.html</guid>
      <pubDate>Tue, 23 Dec 2014 15:20:00 +0900</pubDate>
      <content:encoded>&lt;p&gt;&lt;code&gt;:target&lt;/code&gt;擬似クラスではフラグメント識別子と一致する要素に対してスタイルを当てることができる。これを利用するとCSSだけでインタラクティブにデザインを変更することが可能になる。一方History APIではページの遷移なくフラグメント識別子を含め、アクセス中のURLを書き換えることができる。では&lt;code&gt;:target&lt;/code&gt;擬似クラスで有効になっているスタイルは、History APIでフラグメント識別子を変更した場合に動的に切り替わってくれるだろうか。&lt;/p&gt;

&lt;p&gt;View Demo: &lt;a href="http://hail2u.net/pub/test/603.html"&gt;:target and history.replaceState()&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;デモ・ページではEnable #test:targetをクリックするとURLに&lt;code&gt;#test&lt;/code&gt;というフラグメント識別子が追加される。&lt;code&gt;#test:target&lt;/code&gt;セレクターを通して、文字色を緑にするようにしてあるので、クリック後文章が緑になることだろう。Disable #test:target by history.replaceState()ボタンを押すと&lt;code&gt;history.replaceState()&lt;/code&gt;を使ってURLからフラグメント識別子が削られる。ここで文字色が緑から黒になればCSSにも反映されることになる。&lt;/p&gt;

&lt;p&gt;しかし、だいたいのブラウザーで緑のままなので、&lt;code&gt;history.replaceState()&lt;/code&gt;によるフラグメント識別子の変更に&lt;code&gt;:target&lt;/code&gt;擬似クラスは応じてくれないようだ。もしかするとどこかでこういう挙動になるべきと決まっているのかもしれないが、残念ながら僕には見つけられなかった。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;code&gt;:target&lt;/code&gt;擬似クラスを使ったオーバーレイのフルスクリーン・ナビゲーションを作ろうかなという過程で、CSSだけだと消せないためどうしてやろうかと考えていて、History APIを使ってみたらダメだった、という過程で発見した。「珍」というほどではないが、直感的な動作とは思えないので&lt;a href="http://www.adventar.org/calendars/341"&gt;CSS珍百景 Advent Calendar 2014&lt;/a&gt;の19日目として提供しておく。&lt;/p&gt;

&lt;p&gt;対策はそれほど難しくはない。&lt;code&gt;location.hash = &amp;#39;&amp;#39;&lt;/code&gt;でフラグメント識別子を空にし、&lt;code&gt;:target&lt;/code&gt;擬似クラスを無効にした後、改めて&lt;code&gt;history.replaceState(&amp;#39;&amp;#39;, &amp;#39;&amp;#39;, location.pathname)&lt;/code&gt;とすれば良い。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>mdtoc - The markdown ToC generator</title>
      <link>http://hail2u.net/blog/coding/mdtoc.html</link>
      <description>Markdownファイルの見出しからGitHub互換のToCを生成して埋め込むCLIツール、mdtocを作成した。Node.js製でmarkedパッケージに依存している。実行すると引数に指定したMarkdownファイルの中に書かれた&lt;!-- #toc --&gt;と&lt;!-- /toc --&gt;の間がToCになる。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Coding</category>
      <guid isPermaLink="true">http://hail2u.net/blog/coding/mdtoc.html</guid>
      <pubDate>Mon, 22 Dec 2014 00:40:00 +0900</pubDate>
      <content:encoded>&lt;p&gt;Markdownファイルの見出しからGitHub互換のToCを生成して埋め込むCLIツール、mdtocを作成した。Node.js製で&lt;a href="https://www.npmjs.com/package/marked"&gt;markedパッケージ&lt;/a&gt;に依存している。実行すると引数に指定したMarkdownファイルの中に書かれた&lt;code&gt;&amp;lt;!-- #toc --&amp;gt;&lt;/code&gt;と&lt;code&gt;&amp;lt;!-- /toc --&amp;gt;&lt;/code&gt;の間がToCになる。&lt;/p&gt;

&lt;p&gt;Download: &lt;a href="http://hail2u.net/pub/mdtoc.js"&gt;mdtoc.js&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;例えば以下のようにMarkdownファイル、&lt;code&gt;foo.md&lt;/code&gt;に&lt;code&gt;&amp;lt;!-- #toc --&amp;gt;&lt;/code&gt;と&lt;code&gt;&amp;lt;!-- /toc --&amp;gt;&lt;/code&gt;を書いておき、&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Test
====

&amp;lt;!-- #toc --&amp;gt;
&amp;lt;!-- /toc --&amp;gt;

Foo
---

### Foo Foo

### Foo Bar

Bar
---

### Bar Foo
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ターミナルからmdtocを実行すると、&lt;/p&gt;

&lt;pre&gt;&lt;samp&gt;$ &lt;kbd&gt;mdtoc foo.md&lt;/kbd&gt;
&lt;/samp&gt;&lt;/pre&gt;

&lt;p&gt;以下のようにToCが挿入される。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Test
====

&amp;lt;!-- #toc --&amp;gt;

* [Foo](#foo)
  * [Foo Foo](#foo-foo)
  * [Foo Bar](#foo-bar)
* [Bar](#bar)
  * [Bar Foo](#bar-foo)

&amp;lt;!-- /toc --&amp;gt;

Foo
---

### Foo Foo

### Foo Bar

Bar
---

### Bar Foo
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ToCの生成対象は最初の見出し以外のすべて。インデントは二番目の見出しを基準に調節されるようにした。大抵は&lt;code&gt;README.md&lt;/code&gt;に対して使われると思うので、引数を省略した場合は&lt;code&gt;README.md&lt;/code&gt;に対して実行するようにもなっている。改行コードは元の文書に従うようにしておいた。&lt;/p&gt;

&lt;p&gt;互換性はそこそこありそうだが、Redcarpetを使ったCLIツールの方が確実と思われるので、それを探すか暇な時に書き直したい。そのためnpmで公開するつもりは今のところない。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;a href="https://github.com/hail2u/html-best-practices"&gt;HTML Best Practices&lt;/a&gt;のToCを簡単に更新できるようにするために色々探したけど良い物が見つからなかった。&lt;/p&gt;

&lt;p&gt;&lt;a href="https://www.npmjs.com/package/marked-toc"&gt;marked-toc&lt;/a&gt;は記号の扱いにGitHubと互換性がなく、大体はうまくいくのだけど、たまにうまくいかない。別の名前で一から作り直してるみたいだが、今度はまったく英数字以外がまったく考慮されないものになっていて期待できない。&lt;/p&gt;

&lt;p&gt;&lt;a href="https://www.npmjs.com/package/doctoc"&gt;doctoc&lt;/a&gt;はコード・ブロックに書いた&lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt;タグなどを拾ってしまってめちゃくちゃなToCが生成された。他、どうでも良さそうなPRリンクや派手すぎる埋め込みコメントなど色々うっとうしかった。&lt;/p&gt;

&lt;p&gt;他にもたくさんあった(npmだけで15くらい見つかる)が、&lt;code&gt;#&lt;/code&gt;での見出し限定のものであったり、特殊な記法で見出しを書かなくてはならなかったりと、試すまでもなく使いたくならないものばかりだった。&lt;/p&gt;

&lt;p&gt;mdtocでは、markedの&lt;a href="https://github.com/chjj/marked#overriding-renderer-methods"&gt;レンダラーの差し替え&lt;/a&gt;を利用して見出しをすべて拾い、Redcarpetのコードにあった&lt;a href="https://github.com/vmg/redcarpet/blob/816e0933a120b66759a71284a24eacac8880f765/ext/redcarpet/html.h#L76"&gt;削除する文字&lt;/a&gt;を削除し、空白をマイナスに置換し、最後にURLエンコードするというだけにした。余計なことをなるべくしないようにしたので、そこそこ互換性があるんじゃないかと思う。&lt;/p&gt;

&lt;h2&gt;追記&lt;/h2&gt;

&lt;p&gt;Git Repository: &lt;a href="https://github.com/hail2u/node-gfmtoc"&gt;node-gfmtoc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;リポジトリーを作成し、&lt;code&gt;git clone&lt;/code&gt;からの&lt;code&gt;npm install &amp;amp;&amp;amp; npm link&lt;/code&gt;でサクッと利用可能になるようにしておいた。MarkdownというかGitHub flavored Markdown (正確にはHTML pipeline？)に依存するものなのでgfmtocに名前は変えた。npmレジストリーへ公開はしない。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>HTML Best Practices</title>
      <link>http://hail2u.net/blog/webdesign/html-best-practices.html</link>
      <description>少し前に書いた失われたウェブ制作のベスト・プラクティスという記事の公開後、やはりある程度まとまった形の文書が必要なのではないかという気分になった。そこでHTMLはどのようなことに気を付けて書くと安定したものになるのかという視点で、悪い例と良い例を併記したHTML Best Practicesという文書を作成した。</description>
      <author>hail2u@gmail.com (Kyo Nagashima)</author>
      <category>Web Design</category>
      <guid isPermaLink="true">http://hail2u.net/blog/webdesign/html-best-practices.html</guid>
      <pubDate>Sun, 21 Dec 2014 00:05:00 +0900</pubDate>
      <content:encoded>&lt;figure&gt;
  &lt;a href="https://github.com/hail2u/html-best-practices"&gt;&lt;img alt="HTML Best Practices" src="http://hail2u.net/images/blog/html-best-practices.png"&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;少し前に書いた&lt;a href="http://hail2u.net/blog/webdesign/lost-best-practices.html"&gt;失われたウェブ制作のベスト・プラクティス&lt;/a&gt;という記事の公開後、やはりある程度まとまった形の文書が必要なのではないかという気分になった。そこでHTMLはどのようなことに気を付けて書くと安定したものになるのかという視点で、悪い例と良い例を併記した&lt;a href="https://github.com/hail2u/html-best-practices"&gt;HTML Best Practices&lt;/a&gt;という文書を作成した。&lt;/p&gt;

&lt;p&gt;それぞれにそれぞれの理由はあるが、その解説は簡単ではない。歴史的な背景を始めとした様々な点からの落とし所であり、それら前提となる物事について書くとなると膨大な量になりうる。そのためコード例で悪いものと良いものを併記するだけに留めておいた。&lt;/p&gt;

&lt;p&gt;こうなっていると、「なぜ」がわからないという面もあるが、「これをこう書けるのか」というような面もある。啓蒙的な意味合いが強い文書にも関わらずカジュアルに読めるため、悪くはないのではないかと思う。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;現時点でほとんどの要素の書き方についてはひと通り触れることができた。多くは僕の知識に基づくものなので、それなりに「今」を反映できているはずだ。他も仕様のコード例をアレンジしたもののため、正しく、シンプルなものにできていることと思う。&lt;/p&gt;

&lt;p&gt;このような安定性を意識した書き方に沿って、シンプルにHTMLを書いていけば、保守しやすく拡張しやすいウェブサイトを制作できることだろう。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;しかし、この文書にはこういったベスト・プラクティスと呼ばれるものに欠かすことのできない系統のものがまったく出てこない。それはパフォーマンスについてのベスト・プラクティスだ。&lt;/p&gt;

&lt;p&gt;パフォーマンス向上を目指したHTMLの書き方とは、つまりHTTPリクエストが効率的に行われるような書き方だ。例えば&lt;code&gt;script&lt;/code&gt;要素を動的に追加することによる非同期なJavaScriptの実行が挙げられる。しかしこれには&lt;a href="https://www.igvita.com/2014/05/20/script-injected-async-scripts-considered-harmful/"&gt;有害だという大家からの意見&lt;/a&gt;が既にある。またCSSをJavaScriptより先に読み込むというセオリーも崩れ始めている(&lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Optimizing_your_pages_for_speculative_parsing"&gt;speculative parsing (投機的パース)&lt;/a&gt;による)。そしてHTTP/2も控えている。&lt;/p&gt;

&lt;p&gt;こういったHTTPリクエストの効率化を目指すための書き方は、数年前ならともかく、激変しつつある今は刹那的なテクニックにしか成りえなそうだ。ベスト・プラクティスと呼べるようなものは減りつつあるのではないか。とは言うものの、そのようなテクニックについて追加してくれれば、取り込むことはやぶさかではない。&lt;/p&gt;

&lt;p&gt;他、もちろん提案はどんなものでも大歓迎なので、悪い例と良い例を作るくらいで是非気軽に提案して欲しい。例さえあればあとはタイトルを英語で考えるだけなので、日本語で提案してくれてもまったく構わない。既に載せたものに関してもベスト・プラクティスとは思えないというような意見も、むしろこちらをお願いしたい。&lt;/p&gt;</content:encoded>
    </item>
    <item>
      <title>Documentsに「ウェブ・タイポグラフィーのベスト・プラクティス」を追加</title>
      <link>http://hail2u.net/documents/web-typography-best-practices.html</link>
      <pubDate>Sun, 28 Sep 2014 00:51:35 +0900</pubDate>
      <guid isPermaLink="true">http://hail2u.net/documents/web-typography-best-practices.html</guid>
      <description>&lt;p&gt;&lt;a href="http://www.smashingmagazine.com/2013/05/17/typographic-design-patterns-practices-case-study-2013/"&gt;Smashing Magazineによるウェブサイトのタイポグラフィーについての調査&lt;/a&gt;をわかりやすくまとめた&lt;a href="http://bootstrapbay.com/blog/web-typography-best-practices/"&gt;The All-Inclusive Guide to Web Typography Best Practices&lt;/a&gt;の日本語訳です。ベスト・プラクティスになりうる部分のみコンパクトに抽出された参考になる文書だと思います。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Twitterアカウントを作成</title>
      <link>https://twitter.com/hail2unet</link>
      <pubDate>Thu, 19 Jun 2014 07:15:12 +0900</pubDate>
      <guid isPermaLink="true">https://twitter.com/hail2unet</guid>
      <description>&lt;p&gt;更新情報やブログに公開された記事の他、重要なお知らせを通知するためのTwitterアカウントを作成しました。今まで個人のアカウントでツイートされていたそれらは、今後こちらで行われます。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Documentsに「安全でアクセシブルなアイコン・フォント」を追加</title>
      <link>http://hail2u.net/documents/bulletproof-icon-fonts.html</link>
      <pubDate>Tue, 28 Jan 2014 11:09:52 +0900</pubDate>
      <guid isPermaLink="true">http://hail2u.net/documents/bulletproof-icon-fonts.html</guid>
      <description>&lt;p&gt;アイコン・フォントの安全な実装についての&lt;a href="http://filamentgroup.com/lab/bulletproof_icon_fonts/"&gt;Bulletproof Accessible Icon Fonts&lt;/a&gt;という記事の日本語訳です。アクセシビリティ上の問題を含め、巷間のアイコン・フォントの現状の課題とその対処についても触れられているので、アイコン・フォントの実装に大いに役に立ってくれるでしょう。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Documentsに「Sassの基本」を追加</title>
      <link>http://hail2u.net/documents/sass-guide-ja.html</link>
      <pubDate>Wed, 11 Dec 2013 07:10:29 +0900</pubDate>
      <guid isPermaLink="true">http://hail2u.net/documents/sass-guide-ja.html</guid>
      <description>&lt;p&gt;&lt;a href="http://sass-lang.com/"&gt;Sass&lt;/a&gt;がリニューアルされ、このサイトに訳を載せていたチュートリアルが消え、代わりに&lt;a href="http://sass-lang.com/guide"&gt;Sass Basics&lt;/a&gt;になりました。内容的にはあまり変わらないか多少薄くなっていますが、&lt;code&gt;@extend&lt;/code&gt;への言及も追加されたので、日本語訳を作成しました。&lt;/p&gt;</description>
    </item>
    <lastBuildDate>Tue, 30 Dec 2014 03:42:00 +0900</lastBuildDate>
  </channel>
</rss>
